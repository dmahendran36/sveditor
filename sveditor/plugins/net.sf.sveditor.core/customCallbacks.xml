<project name="customCallbacks" default="pre.compile">

	<target name="pre.compile" unless="vhdl.parser.uptodate">
		<echo message="Building ANTLR"/>
		<mkdir dir="${basedir}/src-gen"/>
		<java classname="org.antlr.v4.Tool" failonerror="true">
			<classpath path="${antlr_dir}/antlr-4.7.1-complete.jar"/>
			<arg value="-o"/>
			<arg value="${basedir}/src-gen/net/sf/sveditor/core/vhdl/parser"/>
			<arg value="-package"/>
			<arg value="net.sf.sveditor.core.vhdl.parser"/>
			<arg value="-visitor"/>
			<arg value="${basedir}/src/net/sf/sveditor/core/vhdl/parser/vhdl.g4"/>
		</java>
		<touch file="${basedir}/src-gen/parser.d"/>
	</target>

	<target name="pre.compile.sav">
		<!--
		<echo message="Generating Operator Lexer"/>
		compiler="org.eclipse.jdt.core.JDTCompilerAdapter"
		
		<javac source="1.6" target="1.6" 
			srcdir="${basedir}/src" destdir="${basedir}/bin"
			includes="**/parser/MkOperatorParser.java" includeantruntime="true">
		</javac>
		<java classpath="${basedir}/bin" classname="net.sf.sveditor.core.parser.MkOperatorParser">
			<arg value="${basedir}/src/net/sf/sveditor/core/parser/SVOperatorLexer.java"/>
		</java>
		-->
	</target>
		
	<target name="pre.build.jars"/>
	
	<target name="post.build.jars"/>

	<target name="pre.build.sources"/>
	<target name="post.build.sources"/>
	<target name="pre.name"/>
	
	<property name="antlr_dir" value="${basedir}/../net.sf.sveditor.extjar"/>
	
	<uptodate property="vhdl.parser.uptodate"
		targetfile="${basedir}/src-gen/parser.d">
		<srcfiles dir="${basedir}/src/net/sf/sveditor/core/vhdl/parser"
			includes="*.g4"/>
	</uptodate>
	

	
	<target name="post.compile.name"/>
	<target name="post.compile.@dot"/>
	<target name="post.name"/>
	<target name="post.@dot"/>
	<target name="pre.gather.bin.parts"/>
	<target name="post.gather.bin.parts"/>
	<target name="pre.gather.sources"/>
	<target name="post.gather.sources"/>
	<target name="pre.gather.logs"/>
	<target name="post.gather.logs"/>
	<target name="pre.clean"/>
	
	<target name="post.clean">
		<delete dir="${basedir}/src-gen"/>
	</target>
</project> 
